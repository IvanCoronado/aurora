{"version":3,"sources":["scripts/app.js"],"names":["angular","module","component","templateUrl","bindings","head","values","MainController","dataService","init","getData","then","data","vm","nvd3Data","getNvd3CompatibleData","tableData","getTableCompatibleData","exportSvgAsImg","saveSvgAsPng","document","getElementsByTagName","this","d3","time","format","showTable","options","chart","type","height","margin","top","right","bottom","left","x","d","Date","y","useInteractiveGuideline","xAxis","tickFormat","yAxis","axisLabelDistance","$inject","controller","isElement","obj","HTMLElement","SVGElement","requireDomNode","el","Error","isExternal","url","lastIndexOf","window","location","host","inlineImages","callback","images","querySelectorAll","length","checkDone","i","image","href","getAttributeNS","value","console","warn","canvas","createElement","ctx","getContext","img","Image","getAttribute","src","onload","width","drawImage","setAttributeNS","toDataURL","onerror","log","styles","selectorRemap","css","sheets","styleSheets","rules","cssRules","e","j","rule","match","selectorText","err","querySelector","selector","style","cssText","getDimension","clone","dim","v","viewBox","baseVal","parseInt","getBoundingClientRect","getComputedStyle","getPropertyValue","isNaN","parseFloat","reEncode","encodeURIComponent","replace","p1","c","String","fromCharCode","decodeURIComponent","download","name","uri","a","body","appendChild","addEventListener","parentNode","removeChild","click","out$","exports","define","doctype","svgAsDataUri","cb","scale","xmlns","outer","cloneNode","tagName","getBBox","error","box","setAttribute","svg","createElementNS","join","fos","s","innerHTML","defs","insertBefore","firstChild","btoa","svgAsPngUri","context","backgroundColor","fillStyle","fillRect","png","SecurityError","saveSvg","dataServiceFactory","$q","deferred","defer","csv","get","rows","isObject","reject","resolve","promise","keys","_","chain","first","keysIn","map","row","getSeriesKeys","temporalSeries","key","serie","push","initSeriesValues","series","seriePoint","moment","toDate","omit","service","factory","runBlock","run","routeConfig","$routeProvider","when","controllerAs","otherwise","redirectTo","config","$templateCache","put"],"mappings":"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","file":"scripts/app-67b08dca8d.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('aurora', ['ngRoute','nvd3']);\n\n})();\n\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('aurora')\r\n        .component('myTable', {\r\n            templateUrl: 'app/components/my-table/my-table.tpl.html',\r\n            bindings:{\r\n                head: '<',\r\n                values: '<'\r\n            }\r\n        });\r\n})();\n(function() {\n    'use strict';\n\n    angular\n        .module('aurora')\n        .controller('MainController', MainController);\n\n    /** @ngInject */\n    function MainController(dataService) {\n        var vm = this,\n        format = d3.time.format(\"%m/%d/%Y\");\n\n        vm.showTable = true;\n        vm.exportSvgAsImg = exportSvgAsImg;\n\n        init();\n\n        function init(){\n            dataService.getData().then(function(data){\n                vm.nvd3Data = dataService.getNvd3CompatibleData(data);\n                vm.tableData = dataService.getTableCompatibleData(data); \n            });\n        }\n\n        vm.options = {\n            chart: {\n                type: 'lineChart',\n                height: 450,\n                margin : {\n                    top: 20,\n                    right: 20,\n                    bottom: 60,\n                    left: 55\n                },\n                x: function(d){ return new Date(d.x); },\n                y: function(d){ return d.y; },\n                useInteractiveGuideline: true,\n                xAxis: {\n                    tickFormat: function(d){\n                        return d3.time.format('%b %d')( new Date(d));\n                    },\n                },\n                yAxis: {\n                    axisLabelDistance: -10\n                }\n            }\n        };\n\n        function exportSvgAsImg(){\n            saveSvgAsPng(document.getElementsByTagName(\"svg\")[0], \"diagram.png\");\n        }\n    }\n})();\n\n(function() {\r\n  var out$ = typeof exports != 'undefined' && exports || typeof define != 'undefined' && {} || this;\r\n\r\n  var doctype = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">';\r\n\r\n  function isElement(obj) {\r\n    return obj instanceof HTMLElement || obj instanceof SVGElement;\r\n  }\r\n\r\n  function requireDomNode(el) {\r\n    if (!isElement(el)) {\r\n      throw new Error('an HTMLElement or SVGElement is required; got ' + el);\r\n    }\r\n  }\r\n\r\n  function isExternal(url) {\r\n    return url && url.lastIndexOf('http',0) == 0 && url.lastIndexOf(window.location.host) == -1;\r\n  }\r\n\r\n  function inlineImages(el, callback) {\r\n    requireDomNode(el);\r\n\r\n    var images = el.querySelectorAll('image'),\r\n        left = images.length,\r\n        checkDone = function() {\r\n          if (left === 0) {\r\n            callback();\r\n          }\r\n        };\r\n\r\n    checkDone();\r\n    for (var i = 0; i < images.length; i++) {\r\n      (function(image) {\r\n        var href = image.getAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\");\r\n        if (href) {\r\n          if (isExternal(href.value)) {\r\n            console.warn(\"Cannot render embedded images linking to external hosts: \"+href.value);\r\n            return;\r\n          }\r\n        }\r\n        var canvas = document.createElement('canvas');\r\n        var ctx = canvas.getContext('2d');\r\n        var img = new Image();\r\n        href = href || image.getAttribute('href');\r\n        if (href) {\r\n          img.src = href;\r\n          img.onload = function() {\r\n            canvas.width = img.width;\r\n            canvas.height = img.height;\r\n            ctx.drawImage(img, 0, 0);\r\n            image.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", canvas.toDataURL('image/png'));\r\n            left--;\r\n            checkDone();\r\n          }\r\n          img.onerror = function() {\r\n            console.log(\"Could not load \"+href);\r\n            left--;\r\n            checkDone();\r\n          }\r\n        } else {\r\n          left--;\r\n          checkDone();\r\n        }\r\n      })(images[i]);\r\n    }\r\n  }\r\n\r\n  function styles(el, selectorRemap) {\r\n    var css = \"\";\r\n    var sheets = document.styleSheets;\r\n    for (var i = 0; i < sheets.length; i++) {\r\n      try {\r\n        var rules = sheets[i].cssRules;\r\n      } catch (e) {\r\n        console.warn(\"Stylesheet could not be loaded: \"+sheets[i].href);\r\n        continue;\r\n      }\r\n\r\n      if (rules != null) {\r\n        for (var j = 0; j < rules.length; j++) {\r\n          var rule = rules[j];\r\n          if (typeof(rule.style) != \"undefined\") {\r\n            var match, selectorText;\r\n\r\n            try {\r\n              selectorText = rule.selectorText;\r\n            } catch(err) {\r\n              console.warn('The following CSS rule has an invalid selector: \"' + rule + '\"', err);\r\n            }\r\n\r\n            try {\r\n              if (selectorText) {\r\n                match = el.querySelector(selectorText);\r\n              }\r\n            } catch(err) {\r\n              console.warn('Invalid CSS selector \"' + selectorText + '\"', err);\r\n            }\r\n\r\n            if (match) {\r\n              var selector = selectorRemap ? selectorRemap(rule.selectorText) : rule.selectorText;\r\n              css += selector + \" { \" + rule.style.cssText + \" }\\n\";\r\n            } else if(rule.cssText.match(/^@font-face/)) {\r\n              css += rule.cssText + '\\n';\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return css;\r\n  }\r\n\r\n  function getDimension(el, clone, dim) {\r\n    var v = (el.viewBox && el.viewBox.baseVal && el.viewBox.baseVal[dim]) ||\r\n      (clone.getAttribute(dim) !== null && !clone.getAttribute(dim).match(/%$/) && parseInt(clone.getAttribute(dim))) ||\r\n      el.getBoundingClientRect()[dim] ||\r\n      parseInt(clone.style[dim]) ||\r\n      parseInt(window.getComputedStyle(el).getPropertyValue(dim));\r\n    return (typeof v === 'undefined' || v === null || isNaN(parseFloat(v))) ? 0 : v;\r\n  }\r\n\r\n  function reEncode(data) {\r\n    data = encodeURIComponent(data);\r\n    data = data.replace(/%([0-9A-F]{2})/g, function(match, p1) {\r\n      var c = String.fromCharCode('0x'+p1);\r\n      return c === '%' ? '%25' : c;\r\n    });\r\n    return decodeURIComponent(data);\r\n  }\r\n\r\n  out$.svgAsDataUri = function(el, options, cb) {\r\n    requireDomNode(el);\r\n\r\n    options = options || {};\r\n    options.scale = options.scale || 1;\r\n    var xmlns = \"http://www.w3.org/2000/xmlns/\";\r\n\r\n    inlineImages(el, function() {\r\n      var outer = document.createElement(\"div\");\r\n      var clone = el.cloneNode(true);\r\n      var width, height;\r\n      if(el.tagName == 'svg') {\r\n        width = options.width || getDimension(el, clone, 'width');\r\n        height = options.height || getDimension(el, clone, 'height');\r\n      } else if(el.getBBox) {\r\n        var box = el.getBBox();\r\n        width = box.x + box.width;\r\n        height = box.y + box.height;\r\n        clone.setAttribute('transform', clone.getAttribute('transform').replace(/translate\\(.*?\\)/, ''));\r\n\r\n        var svg = document.createElementNS('http://www.w3.org/2000/svg','svg')\r\n        svg.appendChild(clone)\r\n        clone = svg;\r\n      } else {\r\n        console.error('Attempted to render non-SVG element', el);\r\n        return;\r\n      }\r\n\r\n      clone.setAttribute(\"version\", \"1.1\");\r\n      if (!clone.getAttribute('xmlns')) {\r\n        clone.setAttributeNS(xmlns, \"xmlns\", \"http://www.w3.org/2000/svg\");\r\n      }\r\n      if (!clone.getAttribute('xmlns:xlink')) {\r\n        clone.setAttributeNS(xmlns, \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\r\n      }\r\n      clone.setAttribute(\"width\", width * options.scale);\r\n      clone.setAttribute(\"height\", height * options.scale);\r\n      clone.setAttribute(\"viewBox\", [\r\n        options.left || 0,\r\n        options.top || 0,\r\n        width,\r\n        height\r\n      ].join(\" \"));\r\n\r\n      var fos = clone.querySelectorAll('foreignObject > *');\r\n      for (var i = 0; i < fos.length; i++) {\r\n        fos[i].setAttributeNS(xmlns, \"xmlns\", \"http://www.w3.org/1999/xhtml\");\r\n      }\r\n\r\n      outer.appendChild(clone);\r\n\r\n      var css = styles(el, options.selectorRemap);\r\n      var s = document.createElement('style');\r\n      s.setAttribute('type', 'text/css');\r\n      s.innerHTML = \"<![CDATA[\\n\" + css + \"\\n]]>\";\r\n      var defs = document.createElement('defs');\r\n      defs.appendChild(s);\r\n      clone.insertBefore(defs, clone.firstChild);\r\n\r\n      var svg = doctype + outer.innerHTML;\r\n      var uri = 'data:image/svg+xml;base64,' + window.btoa(reEncode(svg));\r\n      if (cb) {\r\n        cb(uri);\r\n      }\r\n    });\r\n  }\r\n\r\n  out$.svgAsPngUri = function(el, options, cb) {\r\n    requireDomNode(el);\r\n\r\n    out$.svgAsDataUri(el, options, function(uri) {\r\n      var image = new Image();\r\n      image.onload = function() {\r\n        var canvas = document.createElement('canvas');\r\n        canvas.width = image.width;\r\n        canvas.height = image.height;\r\n        var context = canvas.getContext('2d');\r\n        if(options && options.backgroundColor){\r\n          context.fillStyle = options.backgroundColor;\r\n          context.fillRect(0, 0, canvas.width, canvas.height);\r\n        }\r\n        context.drawImage(image, 0, 0);\r\n        var a = document.createElement('a'), png;\r\n        try {\r\n          png = canvas.toDataURL('image/png');\r\n        } catch (e) {\r\n          if ((typeof SecurityError !== 'undefined' && e instanceof SecurityError) || e.name == \"SecurityError\") {\r\n            console.error(\"Rendered SVG images cannot be downloaded in this browser.\");\r\n            return;\r\n          } else {\r\n            throw e;\r\n          }\r\n        }\r\n        cb(png);\r\n      }\r\n      image.onerror = function(error) {\r\n        console.error('There was an error loading the data URI as an image', error);\r\n      }\r\n      image.src = uri;\r\n    });\r\n  }\r\n\r\n  function download(name, uri) {\r\n    var a = document.createElement('a');\r\n    a.download = name;\r\n    a.href = uri;\r\n    document.body.appendChild(a);\r\n    a.addEventListener(\"click\", function(e) {\r\n      a.parentNode.removeChild(a);\r\n    });\r\n    a.click();\r\n  }\r\n\r\n  out$.saveSvg = function(el, name, options) {\r\n    requireDomNode(el);\r\n\r\n    options = options || {};\r\n    out$.svgAsDataUri(el, options, function(uri) {\r\n      download(name, uri);\r\n    });\r\n  }\r\n\r\n  out$.saveSvgAsPng = function(el, name, options) {\r\n    requireDomNode(el);\r\n\r\n    options = options || {};\r\n    out$.svgAsPngUri(el, options, function(uri) {\r\n      download(name, uri);\r\n    });\r\n  }\r\n\r\n  // if define is defined create as an AMD module\r\n  if (typeof define !== 'undefined') {\r\n    define(function() {\r\n      return out$;\r\n    });\r\n  }\r\n})();\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n      .module('aurora')\r\n      .factory('dataService', dataServiceFactory);\r\n\r\n    /* @ngInject */\r\n    function dataServiceFactory($q) {\r\n        var service = {\r\n            getData: getData,\r\n            getTableCompatibleData: getTableCompatibleData,\r\n            getNvd3CompatibleData: getNvd3CompatibleData\r\n        };\r\n\r\n        return service;\r\n\r\n        function getData() {\r\n            var deferred = $q.defer();\r\n  \r\n            d3.csv(\"/assets/data/Data2.csv\")\r\n                .get(function(error, rows) { \r\n                    if(angular.isObject(error)){\r\n                        deferred.reject(error);\r\n                    }else{\r\n                        deferred.resolve(rows)\r\n                    } \r\n                });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        function getTableCompatibleData(data){\r\n            var keys, values, tableData;\r\n            keys = _.chain(data).first().keysIn().value();\r\n            values = _.chain(data).map(function(row){\r\n                return _.values(row);\r\n            }).value();\r\n\r\n            tableData = {\r\n                head : keys,\r\n                values : values\r\n            }\r\n            \r\n            return tableData;\r\n        }\r\n\r\n        function getNvd3CompatibleData(data) {\r\n            var keys, series;\r\n\r\n            keys = _.chain(data).first().omit('Date').keysIn().value();\r\n                                   \r\n            series = getSeriesKeys();\r\n            initSeriesValues(series, data);\r\n\r\n            return series;\r\n\r\n            function getSeriesKeys(){\r\n                var temporalSeries = [];\r\n\r\n                _.map(keys, function(key){\r\n                    var serie = {\r\n                        key: key,\r\n                        values: []\r\n                    };\r\n                    temporalSeries.push(serie);\r\n                })\r\n                return temporalSeries;\r\n            }\r\n\r\n            function initSeriesValues(series, data){\r\n                _.map(data, function(row){\r\n                    _.map(series, function(serie){\r\n                        var seriePoint = {\r\n                            x: moment(row.Date, \"DD/MM/YYYY\").toDate(),\r\n                            y: _.chain(row).get(serie.key).replace(',','.').parseInt().value()\r\n                        };\r\n                        serie.values.push(seriePoint);\r\n                    })\r\n                })\r\n            }\r\n        }\r\n    }\r\n})();\n(function() {\n  'use strict';\n\n  angular\n    .module('aurora')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock() {\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('aurora')\n    .config(routeConfig);\n\n  function routeConfig($routeProvider) {\n    $routeProvider\n      .when('/', {\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      })\n      .otherwise({\n        redirectTo: '/'\n      });\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('aurora');\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('aurora')\n    .config(config);\n\n  /** @ngInject */\n  function config() {\n\n  }\n\n})();\n\nangular.module(\"aurora\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<div class=\\\"demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header\\\"><header class=\\\"demo-header mdl-layout__header mdl-color--grey-100 mdl-color-text--grey-600\\\"><div class=mdl-layout__header-row><span class=mdl-layout-title>Stage 1</span><div class=mdl-layout-spacer></div><button class=\\\"mdl-button mdl-js-button\\\" ng-click=\\\"main.showTable = !main.showTable\\\"><label ng-if=main.showTable>Show chart</label><label ng-if=!main.showTable>Show table</label></button> <button class=\\\"mdl-button mdl-js-button\\\" ng-click=main.exportSvgAsImg() ng-disabled=main.showTable><label>Export chart</label></button></div></header><div class=\\\"demo-drawer mdl-layout__drawer mdl-color--blue-grey-900 mdl-color-text--blue-grey-50\\\"><header class=demo-drawer-header><div class=demo-avatar-dropdown><img src=./assets/images/me.jpg class=demo-avatar> <span>ivacormor@gmail.com</span></div></header><nav class=\\\"demo-navigation mdl-navigation mdl-color--blue-grey-800\\\"><a class=mdl-navigation__link href=https://es.linkedin.com/in/ivancoronadomoreno target=_blank>Linkedin </a><a class=mdl-navigation__link href=https://github.com/IvanCoronado target=_blank>Github </a><a class=mdl-navigation__link href=http://stackoverflow.com/users/5147115/ivan-coronado target=_blank>Stackoverflow</a><div class=mdl-layout-spacer></div></nav></div><main class=\\\"mdl-layout__content mdl-color--grey-100\\\"><div class=\\\"mdl-grid demo-content\\\"><my-table ng-if=main.showTable head=main.tableData.head values=main.tableData.values></my-table><div class=\\\"demo-charts mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-grid\\\"><nvd3 ng-if=!main.showTable options=main.options data=main.nvd3Data></nvd3></div></div></main></div>\");\n$templateCache.put(\"app/components/my-table/my-table.tpl.html\",\"<table class=\\\"mdl-data-table mdl-js-data-table mdl-shadow--2dp\\\"><thead><tr><th ng-repeat=\\\"key in $ctrl.head track by $index\\\" class=mdl-data-table__cell--non-numeric ng-bind=key></th></tr></thead><tbody><tr ng-repeat=\\\"value in $ctrl.values track by $index\\\"><td ng-repeat=\\\"key in value track by $index\\\" class=mdl-data-table__cell--non-numeric ng-bind=key></td></tr></tbody></table>\");}]);"],"sourceRoot":"/source/"}